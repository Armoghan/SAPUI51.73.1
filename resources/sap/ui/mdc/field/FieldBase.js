/*!
 * SAPUI5

		(c) Copyright 2009-2019 SAP SE. All rights reserved
	
 */
sap.ui.define(['sap/ui/thirdparty/jquery','sap/ui/Device','sap/ui/mdc/library','sap/ui/mdc/field/FieldBaseRenderer','sap/ui/mdc/condition/FilterOperatorUtil','sap/ui/mdc/condition/Condition','sap/ui/mdc/field/ConditionType','sap/ui/mdc/field/ConditionsType','sap/ui/core/library','sap/ui/core/Control','sap/ui/core/message/MessageMixin','sap/base/util/ObjectPath','sap/base/util/deepEqual','sap/base/util/merge','sap/base/Log','sap/base/util/isEmptyObject','sap/ui/dom/containsOrEquals','sap/ui/model/Filter','sap/ui/model/base/ManagedObjectModel','sap/ui/base/ManagedObjectObserver',"sap/ui/base/SyncPromise",'sap/ui/events/KeyCodes'],function(q,D,l,F,a,C,b,c,d,e,M,O,f,m,L,g,h,k,n,o,S,K){"use strict";var E=l.EditMode;var p=l.FieldDisplay;var V=d.ValueState;var r=d.CalendarType;var s=e.extend("sap.ui.mdc.field.FieldBase",{metadata:{interfaces:["sap.ui.core.IFormContent"],library:"sap.ui.mdc",properties:{dataType:{type:"string",group:"Data",defaultValue:'sap.ui.model.type.String'},dataTypeConstraints:{type:"object",group:"Data",defaultValue:null},dataTypeFormatOptions:{type:"object",group:"Data",defaultValue:null},editMode:{type:"sap.ui.mdc.EditMode",group:"Data",defaultValue:E.Editable},required:{type:"boolean",group:"Data",defaultValue:false},display:{type:"sap.ui.mdc.FieldDisplay",defaultValue:p.Value},textAlign:{type:"sap.ui.core.TextAlign",group:"Appearance",defaultValue:sap.ui.core.TextAlign.Initial},textDirection:{type:"sap.ui.core.TextDirection",group:"Appearance",defaultValue:sap.ui.core.TextDirection.Inherit},placeholder:{type:"string",group:"Misc",defaultValue:""},valueState:{type:"sap.ui.core.ValueState",group:"Appearance",defaultValue:sap.ui.core.ValueState.None},valueStateText:{type:"string",group:"Misc",defaultValue:null},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},multipleLines:{type:"boolean",group:"Appearance",defaultValue:false},maxConditions:{type:"int",group:"Behavior",defaultValue:-1},conditions:{type:"object[]",group:"Data",defaultValue:[],byValue:true},label:{type:"string",group:"Misc",defaultValue:""},metadataDelegate:{type:"string",defaultValue:"sap/ui/mdc/field/FieldBaseDelegate"},_fieldHelpEnabled:{type:"boolean",group:"Appearance",defaultValue:false,visibility:"hidden"}},aggregations:{content:{type:"sap.ui.core.Control",multiple:false},contentEdit:{type:"sap.ui.core.Control",multiple:false},contentDisplay:{type:"sap.ui.core.Control",multiple:false},_content:{type:"sap.ui.core.Control",multiple:true,visibility:"hidden"},fieldInfo:{type:"sap.ui.mdc.field.FieldInfoBase",multiple:false}},associations:{fieldHelp:{type:"sap.ui.mdc.field.FieldHelpBase",multiple:false},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{liveChange:{parameters:{value:{type:"string"},escPressed:{type:"boolean"},previousValue:{type:"string"}}},press:{}},publicMethods:[],defaultAggregation:"content"},_oManagedObjectModel:null});M.call(s.prototype);var t={"default":{edit:"sap/m/Input",editMulti:["sap/m/MultiInput","sap/m/Token"],editMultiLine:"sap/m/TextArea",display:"sap/m/Text",createEdit:e1,createEditMulti:g1,createEditMultiLine:h1,createDisplay:i1},search:{edit:"sap/m/SearchField",display:"sap/m/Text",createEdit:f1,createDisplay:i1},date:{edit:"sap/m/DatePicker",editMulti:["sap/m/MultiInput","sap/m/Token"],display:"sap/m/Text",createEdit:j1,createEditMulti:g1,createDisplay:i1},time:{edit:"sap/m/TimePicker",editMulti:["sap/m/MultiInput","sap/m/Token"],display:"sap/m/Text",createEdit:j1,createEditMulti:g1,createDisplay:i1},dateTime:{edit:"sap/m/DateTimePicker",editMulti:["sap/m/MultiInput","sap/m/Token"],display:"sap/m/Text",createEdit:j1,createEditMulti:g1,createDisplay:i1},link:{edit:"sap/m/Input",editMulti:["sap/m/MultiInput","sap/m/Token"],editMultiLine:"sap/m/TextArea",display:"sap/m/Link",createEdit:e1,createEditMulti:g1,createEditMultiLine:h1,createDisplay:k1},"boolean":{edit:"sap/m/Input",display:"sap/m/Text",createEdit:l1,createDisplay:i1},unit:{edit:"sap/m/Input",editMulti:["sap/m/MultiInput","sap/m/Input","sap/m/Token"],display:"sap/m/Text",createEdit:m1,createEditMulti:n1,createDisplay:i1}};var u={};var v={bool:{name:"sap/ui/mdc/field/BoolFieldHelp",id:"BoolDefaultHelp",control:undefined}};s.prototype.init=function(){this._oManagedObjectModel=new n(this);this._oObserver=new o(this._observeChanges.bind(this));this._oObserver.observe(this,{properties:["display","editMode","dataType","dataTypeFormatOptions","dataTypeConstraints","multipleLines","maxConditions","conditions","metadataDelegate"],aggregations:["fieldInfo","content","contentEdit","contentDisplay"],associations:["fieldHelp"]});this._oDatePickerRequested={};this.attachEvent("modelContextChange",this._handleModelContextChange,this);this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");this._aAsyncChanges=[];this._oDelegate=undefined;this._oDelegatePromise=new Promise(function(i,j){this._oDelegateResolve=i;this._oDelegateReject=j;}.bind(this));};s.prototype.exit=function(){var i=this.getFieldInfo();if(i){i.detachEvent("dataUpdate",N1,this);}var j=this.getContent();if(j){Z.call(this,j);}var Y1=this.getContentEdit();if(Y1){Z.call(this,Y1);}var Z1=this.getContentDisplay();if(Z1){Z.call(this,Z1);}this._oManagedObjectModel.destroy();delete this._oManagedObjectModel;this._oObserver.disconnect();this._oObserver=undefined;if(this._oConditionType&&this._oConditionType._bCreatedByField){this._oConditionType.destroy();this._oConditionType=undefined;}if(this._oConditionsType&&this._oConditionsType._bCreatedByField){this._oConditionsType.destroy();this._oConditionsType=undefined;}var $1=T.call(this);if($1){$1.removeFilterField(this);}var _1=C1.call(this);if(_1){_1.detachEvent("dataUpdate",H1,this);if(this._bConnected){I1.call(this);_1.connect();}}if(this.iLiveChangeTimer){clearTimeout(this.iLiveChangeTimer);}};s.prototype.applySettings=function(){e.prototype.applySettings.apply(this,arguments);if(!this._oDelegate&&!this._oDelegateLoading){W1.call(this,this.getMetadataDelegate());}};s.prototype.onBeforeRendering=function(){if(!this._oDelegate){this._oDelegatePromise.then(function(){a1.call(this);}.bind(this));return;}a1.call(this);};s.prototype.onAfterRendering=function(){if(C1.call(this)&&this.getEditMode()!=E.Display){var j=this.getAggregation("_content",[]);for(var i=0;i<j.length;i++){var Y1=j[i];var Z1=Y1.getFocusDomRef();q(Z1).attr("autocomplete","off");}}};s.prototype.onfocusin=function(i){J1.call(this);};s.prototype.onsapup=function(i){var j=C1.call(this);var Y1=i.srcControl;if(j&&(!this._bIsMeasure||Y1.getShowValueHelp())){i.preventDefault();i.stopPropagation();j.navigate(-1);}};s.prototype.onsapdown=function(i){var j=C1.call(this);var Y1=i.srcControl;if(j&&(!this._bIsMeasure||Y1.getShowValueHelp())){i.preventDefault();i.stopPropagation();j.navigate(1);}};s.prototype.onsapenter=function(i){var j=C1.call(this);if(j&&j.isOpen(true)){j.close();}};s.prototype.clone=function(i,j){this.detachEvent("modelContextChange",this._handleModelContextChange,this);var Y1=this.getContent();if(Y1){Z.call(this,Y1);}var Z1=this.getContentEdit();if(Z1){Z.call(this,Z1);}var $1=this.getContentDisplay();if($1){Z.call(this,$1);}var _1=this.getFieldInfo();if(_1){_1.detachEvent("dataUpdate",N1,this);}var a2=e.prototype.clone.apply(this,arguments);this.attachEvent("modelContextChange",this._handleModelContextChange,this);if(Y1){Y.call(this,Y1);}if(Z1){Y.call(this,Z1);}if($1){Y.call(this,$1);}if(_1){_1.attachEvent("dataUpdate",N1,this);}return a2;};s.prototype.getFieldPath=function(){var i=this.getBindingPath("conditions");if(i&&i.startsWith("/conditions/")){return i.slice(12);}else{return"";}};function _(i,j,Y1,Z1){if(!Z1){if(j){Z1=Promise.resolve(this._getResultForPromise(i));}else{Z1=Promise.reject(Y1);}}this._fireChange(i,j,Y1,Z1);}s.prototype._fireChange=function(i,j,Y1,Z1){};function w(i){i=this._oDelegate.getDataTypeClass(i);var j=x.call(this,i);if(j){return new j(G.call(this,i,this.getDataTypeFormatOptions(),this.getDataTypeConstraints()),this.getDataTypeConstraints());}}function x(i){var j=O.get(i||"");if(!j){throw new Error("DataType cannot be determined");}return j;}function y(){if(!this._oDataType){this._oDataType=this.getDataType();if(typeof this._oDataType==="string"){this._oDataType=w.call(this,this._oDataType);}}return this._oDataType;}s.prototype._initDataType=function(){if(this._oDataType){this._oDataType.destroy();this._oDataType=undefined;}if(this._oDateOriginalType){this._oDateOriginalType.destroy();this._oDateOriginalType=undefined;}if(this._oUnitOriginalType){this._oUnitOriginalType.destroy();this._oUnitOriginalType=undefined;}delete this._sDisplayFormat;delete this._sValueFormat;delete this._sCalendarType;};s.prototype._getDataType=function(){return y.call(this);};function z(){if(this._oDataType&&typeof this._oDataType==="object"){return this._oDataType.getMetadata().getName();}else if(this._oDelegate){return this._oDelegate.getDataTypeClass(this.getDataType());}else{return this.getDataType();}}function A(){if(this._oDataType&&typeof this._oDataType==="object"&&this._oDataType.oConstraints){return this._oDataType.oConstraints;}else{return this.getDataTypeConstraints();}}function B(){if(this._oDataType&&typeof this._oDataType==="object"&&this._oDataType.oFormatOptions){return this._oDataType.oFormatOptions;}else{return this.getDataTypeFormatOptions();}}function G(i,j,Y1){if(this.getMaxConditions()!==1||this.getEditMode()===E.Display){return j;}var Z1=this._oDelegate.getBaseType(i,j,Y1);switch(Z1){case"date":this._sValueFormat="yyyy-MM-dd";break;case"dateTime":this._sValueFormat="yyyy-MM-dd'T'HH:mm:ss";break;case"time":this._sValueFormat="HH:mm:ss";break;default:return j;}this._sDisplayFormat="medium";if(j){j=m({},j);if(j.style){this._sDisplayFormat=j.style;delete j.style;}else if(j.pattern){this._sDisplayFormat=j.pattern;}if(j.calendarType){this._sCalendarType=j.calendarType;}j.pattern=this._sValueFormat;j.calendarType=r.Gregorian;}else{j={pattern:this._sValueFormat,calendarType:r.Gregorian};}return j;}function H(){var i=y.call(this);var j=i.getMetadata().getName();var Y1=i.oFormatOptions;var Z1=i.oConstraints;if(!Y1||Y1.style||!Y1.pattern||Y1.pattern!==this._sValueFormat||!Y1.calendarType||Y1.calendarType!==r.Gregorian){if(Z1&&Z1.isDateOnly){Z1=m({},Z1);delete Z1.isDateOnly;Z1.displayFormat="Date";}var $1=O.get(j);this._oDateOriginalType=this._oDataType;this._oDataType=new $1(G.call(this,j,Y1,Z1),Z1);O1.call(this);}}function I(){var i=y.call(this);var j=i.getMetadata().getName();var Y1=i.oFormatOptions;var Z1=g(i.oConstraints)?undefined:i.oConstraints;if(!Y1||!Y1.hasOwnProperty("showMeasure")||Y1.showMeasure){Y1=m({},Y1);Y1.showMeasure=false;Y1.strictParsing=true;if(Y1.customCurrencies){delete Y1.customCurrencies;}if(Y1.customUnits){delete Y1.customUnits;}var $1=O.get(j);this._oUnitOriginalType=this._oDataType;this._oDataType=new $1(Y1,Z1);this._oDelegate.initializeInternalUnitType(this._oDataType,this._oTypeInitialization);O1.call(this);}}function J(i,j){var Y1=C1.call(this);if(Y1&&this._bConnected){D1.call(this,i,Y1);}}s.prototype._getContent=function(){var i=this.getContent();if(!i){if(this.getEditMode()===E.Display){i=this.getContentDisplay();}else{i=this.getContentEdit();}}if(i){return[i];}else{return this.getAggregation("_content",[]);}};function N(i){if(i===E.Editable||i===E.EditableReadOnly||i===E.EditableDisplay){return true;}else{return false;}}function P(i){if(i===E.Editable){return true;}else{return false;}}function Q(i){if(i&&i!==E.Disabled){return true;}else{return false;}}function R(i){if(i&&i!==E.Editable){return true;}else{return false;}}s.prototype._handleModelContextChange=function(i){if(!this._bFFAdded){var j=T.call(this);if(j){j.addFilterField(this);this._bFFAdded=true;}}};function T(){var i=this.getBinding("conditions");if(i){var j=i.getModel();if(j.isA("sap.ui.mdc.condition.ConditionModel")){return j;}}return undefined;}function U(i){var j=T.call(this);if(j){j.setUIMessage(this.getFieldPath(),i);}else{this.setValueState(V.Error);this.setValueStateText(i);}}function W(){var i=T.call(this);if(i){i.removeUIMessage(this.getFieldPath());}else{this.setValueState(V.None);this.setValueStateText();}}s.prototype._observeChanges=function(j){if(j.name==="editMode"){if(this.getAggregation("_content")){a1.call(this);}}if(j.name==="multipleLines"){if(this.getAggregation("_content")){if(!this._oDelegate){this._oDelegatePromise.then(function(){a1.call(this);}.bind(this));}else{a1.call(this);}}}if(j.name==="dataType"){if(this._oDataType){var Y1=function(_1){var a2=x.call(this,this._oDelegate.getDataTypeClass(j.current));if(!(this._oDataType instanceof a2)){this._initDataType();this.destroyAggregation("_content");O1.call(this);}};if(!this._oDelegate){this._oDelegatePromise.then(function(){Y1.call(this,j.current);}.bind(this));return;}Y1.call(this,j.current);}}if(j.name==="dataTypeFormatOptions"||j.name==="dataTypeConstraints"){if(this._oDataType){this._initDataType();this.destroyAggregation("_content");O1.call(this);}}if(j.name==="maxConditions"){if(this.getAggregation("_content")){if(!this._oDelegate){this._oDelegatePromise.then(function(){a1.call(this);}.bind(this));}else{a1.call(this);}}O1.call(this);}if(j.name==="conditions"){this._bParseError=false;J.call(this,j.current,j.old);var Z1=false;var i=0;for(i=0;i<this._aAsyncChanges.length;i++){var $1=this._aAsyncChanges[i];if($1.waitForUpdate&&f($1.result,j.current)){w1.call(this,$1);Z1=true;break;}}if(Z1){this._aAsyncChanges.splice(i,1);}}if(j.name==="display"){b1.call(this);O1.call(this);}if(j.name==="fieldHelp"&&j.ids){B1.call(this,j.ids,j.mutation);O1.call(this);}if(j.name==="fieldInfo"&&j.child){M1.call(this,j.child,j.mutation);}if(j.name==="content"&&j.child){X.call(this,j.child,j.mutation,j.name);}if(j.name==="contentEdit"&&j.child){X.call(this,j.child,j.mutation,j.name);}if(j.name==="contentDisplay"&&j.child){X.call(this,j.child,j.mutation,j.name);}if(j.name==="metadataDelegate"){W1.call(this,j.current);}};s.prototype.getFocusDomRef=function(){var i=this._getContent();if(i.length>0){return i[0].getFocusDomRef();}else{return this.getDomRef();}};s.prototype.getIdForLabel=function(){var i;var j=this._getContent();if(j.length>0){i=j[0].getIdForLabel();}else{i=this.getId();}return i;};s.prototype.getControlForSuggestion=function(){var i=this._getContent();if(i.length>0){if(this._bIsMeasure){return i[1];}else{return i[0];}}else{return this;}};s.prototype.getMaxConditionsForHelp=function(){if(this._bIsMeasure){return 1;}else{return this.getMaxConditions();}};s.prototype.enhanceAccessibilityState=function(i,j){var Y1=this.getParent();if(Y1&&Y1.enhanceAccessibilityState){Y1.enhanceAccessibilityState(this,j);}return j;};s.prototype.getAccessibilityInfo=function(){var i=this._getContent();if(i.length>0&&i[0].getAccessibilityInfo){return i[0].getAccessibilityInfo();}else{return{};}};s.prototype.connectLabel=function(i){d1.call(this,i);i.bindProperty("text",{path:"$field>/label"});i.setLabelFor(this);return this;};function X(i,j,Y1){if(j==="remove"){Z.call(this,i);q1.call(this,i);if(this._oContentConditionTypes){delete this._oContentConditionTypes[Y1];}}else if(j==="insert"){p1.call(this,i);d1.call(this,i);Y.call(this,i);if(this.getAggregation("_content")){b1.call(this);}if(!this._oContentConditionTypes){this._oContentConditionTypes={};}if(!this._oContentConditionTypes[Y1]){this._oContentConditionTypes[Y1]={};}var Z1;var $1;for($1 in i.getMetadata().getAllProperties()){if(i.getBindingPath($1)==="/conditions"){Z1=i.getBindingInfo($1);if(Z1&&Z1.type&&Z1.type instanceof c){this._oContentConditionTypes[Y1].oConditionsType=Z1.type;}this._sBoundProperty=$1;}if($1==="editable"&&!i.getBindingPath($1)&&i.isPropertyInitial($1)){i.bindProperty($1,{path:"$field>/editMode",formatter:N});}if($1==="enabled"&&!i.getBindingPath($1)&&i.isPropertyInitial($1)){i.bindProperty($1,{path:"$field>/editMode",formatter:Q});}if($1==="displayOnly"&&!i.getBindingPath($1)&&i.isPropertyInitial($1)){i.bindProperty($1,{path:"$field>/editMode",formatter:R});}if($1==="required"&&!i.getBindingPath($1)&&i.isPropertyInitial($1)){i.bindProperty($1,{path:"$field>/required"});}if($1==="textAlign"&&!i.getBindingPath($1)&&i.isPropertyInitial($1)){i.bindProperty($1,{path:"$field>/textAlign"});}if($1==="textDirection"&&!i.getBindingPath($1)&&i.isPropertyInitial($1)){i.bindProperty($1,{path:"$field>/textDirection"});}if($1==="valueState"&&!i.getBindingPath($1)&&i.isPropertyInitial($1)){i.bindProperty($1,{path:"$field>/valueState"});}if($1==="valueStateText"&&!i.getBindingPath($1)&&i.isPropertyInitial($1)){i.bindProperty($1,{path:"$field>/valueStateText"});}if($1==="placeholder"&&!i.getBindingPath($1)&&i.isPropertyInitial($1)){i.bindProperty($1,{path:"$field>/placeholder"});}if($1==="tooltip"&&!i.getBindingPath($1)&&i.isPropertyInitial($1)){i.bindProperty($1,{path:"$field>/tooltip"});}}for(var _1 in i.getMetadata().getAllAggregations()){if(i.getBindingPath(_1)==="/conditions"){Z1=i.getBindingInfo(_1);if(Z1&&Z1.template){for($1 in Z1.template.getMetadata().getAllProperties()){var a2=Z1.template.getBindingInfo($1);if(a2&&a2.type&&a2.type instanceof b){this._oContentConditionTypes[Y1].oConditionType=a2.type;break;}}}break;}}}}function Y(i){if(i.getMetadata().getEvents().change){i.attachEvent("change",v1,this);}if(i.getMetadata().getEvents().liveChange){i.attachEvent("liveChange",y1,this);}if(i.getMetadata().getEvents().press){i.attachEvent("press",z1,this);}}function Z(i){if(i.getMetadata().getEvents().change){i.detachEvent("change",v1,this);}if(i.getMetadata().getEvents().liveChange){i.detachEvent("liveChange",y1,this);}if(i.getMetadata().getEvents().press){i.detachEvent("press",z1,this);}}function $(){if(this._oConditionType&&!this._oConditionType._bCreatedByField){this._oConditionType=undefined;}if(this._oConditionsType&&!this._oConditionsType._bCreatedByField){this._oConditionsType=undefined;}var i=this.getEditMode();var j;var Y1;if(this.getContent()){if(this._oContentConditionTypes.content){j=this._oContentConditionTypes.content.oConditionType;Y1=this._oContentConditionTypes.content.oConditionsType;}}else if(i===E.Display&&this.getContentDisplay()){if(this._oContentConditionTypes.contentDisplay){j=this._oContentConditionTypes.contentDisplay.oConditionType;Y1=this._oContentConditionTypes.contentDisplay.oConditionsType;}}else if(i!==E.Display&&this.getContentEdit()){if(this._oContentConditionTypes.contentEdit){j=this._oContentConditionTypes.contentEdit.oConditionType;Y1=this._oContentConditionTypes.contentEdit.oConditionsType;}}if(j){if(this._oConditionType&&this._oConditionType._bCreatedByField){this._oConditionType.destroy();}this._oConditionType=j;}if(Y1){if(this._oConditionsType&&this._oConditionsType._bCreatedByField){this._oConditionsType.destroy();}this._oConditionsType=Y1;}O1.call(this);}function a1(){$.call(this);var j=this.getEditMode();if(this.getContent()||this._bIsBeingDestroyed||(j===E.Display&&this.getContentDisplay())||(j!==E.Display&&this.getContentEdit())){b1.call(this);return;}var Y1=z.call(this);var Z1=A.call(this);var $1=B.call(this);var _1=this._oDelegate.getBaseType(Y1,$1,Z1);var a2=this.getMaxConditions();var b2;var c2;var d2;var e2=this.getAggregation("_content",[]);var f2;var g2;if(e2.length>0){f2=e2[0];g2=f2.getMetadata().getName().replace(/\./g,"/");}b2=t[_1];if(!b2){if(this.getFieldInfo()&&this._bTriggerable){b2=t.link;}else{var h2=new RegExp("^\\*(.*)\\*|\\$search$");if(h2.test(this.getFieldPath())&&this.getMaxConditions()===1){b2=t.search;}else{b2=t.default;}}}if(j===E.Display){c2=b2.display;d2=b2.createDisplay;}else if(a2!==1){c2=b2.editMulti;d2=b2.createEditMulti;}else if(this.getMultipleLines()){c2=b2.editMultiLine;d2=b2.createEditMultiLine;}else{c2=b2.edit;d2=b2.createEdit;}if(!c2){throw new Error("No control defined for type "+Y1+" in "+this);}var i2;if(Array.isArray(c2)){i2=c2;c2=i2[0];}else{i2=[c2];}if(c2!==g2){this._bHideOperator=false;if(f2){b1.call(this);if(f2.isA("sap.m.DateTimeField")){this._initDataType();}O1.call(this);}var j2;var i=0;for(i=0;i<i2.length;i++){var k2=i2[i];if(!u[k2]){u[k2]={};}if(!u[k2].control){u[k2].control=sap.ui.require(k2);if(!u[k2].control){j2=undefined;}}if(i===0){j2=u[k2].control;}}if(!j2){if(u[c2].promise){u[c2].promise.then(a1.bind(this));return;}else{u[c2].promise=new Promise(function(o2){u[c2].resolve=o2;sap.ui.require(i2,c1.bind(this));}.bind(this)).then(a1.bind(this));return;}}var l2=this.getId()+"-inner";var m2=d2.call(this,j2,l2);for(i=0;i<m2.length;i++){var n2=m2[i];n2.attachEvent("parseError",t1,this);n2.attachEvent("validationError",u1,this);p1.call(this,n2);d1.call(this,n2);if(this._bConnected&&((i===0&&!this._bIsMeasure)||(i===1&&this._bIsMeasure))){K1.call(this,n2);}this.addAggregation("_content",n2);}}}function b1(){this.destroyAggregation("_content");if(this._oDateOriginalType){this._oDataType=this._oDateOriginalType;this._oDateOriginalType=undefined;}else if(this._oUnitOriginalType){this._oDataType=this._oUnitOriginalType;this._oUnitOriginalType=undefined;}}function c1(){for(var i=0;i<arguments.length;i++){var j=arguments[i];var Y1=j.getMetadata().getName();Y1=Y1.replace(/\./g,"/");u[Y1].control=j;if(u[Y1].resolve){u[Y1].resolve();delete u[Y1].resolve;}}}function d1(i){i.setModel(this._oManagedObjectModel,"$field");}function e1(i,j){var Y1=Q1.call(this);var Z1=new i(j,{value:{path:"$field>/conditions",type:Y1},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:N},enabled:{path:"$field>/editMode",formatter:Q},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",showValueHelp:"{$field>/_fieldHelpEnabled}",width:"100%",tooltip:"{$field>/tooltip}",change:v1.bind(this),liveChange:y1.bind(this),valueHelpRequest:E1.bind(this),showSuggestion:true});L1.call(this,Z1);this._sBoundProperty="value";return[Z1];}function f1(i,j){this._bHideOperator=true;var Y1=P1.call(this);var Z1=new i(j,{value:{path:"$field>/conditions/0",type:Y1,mode:"OneWay"},placeholder:"{$field>/placeholder}",width:"100%",tooltip:"{$field>/tooltip}",search:v1.bind(this)});return[Z1];}function g1(i,j){var Y1=sap.ui.require("sap/m/Token");var Z1=P1.call(this);var $1=new Y1(j+"-token",{text:{path:'$field>',type:Z1}});var _1=new i(j,{placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:N},enabled:{path:"$field>/editMode",formatter:Q},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",showValueHelp:"{$field>/_fieldHelpEnabled}",width:"100%",tooltip:"{$field>/tooltip}",tokens:{path:"$field>/conditions",template:$1},dependents:[$1],change:v1.bind(this),liveChange:y1.bind(this),tokenUpdate:A1.bind(this),valueHelpRequest:E1.bind(this)});L1.call(this,_1);return[_1];}function h1(i,j){var Y1=Q1.call(this);var Z1=new i(j,{value:{path:"$field>/conditions",type:Y1},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:N},enabled:{path:"$field>/editMode",formatter:Q},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",width:"100%",tooltip:"{$field>/tooltip}",change:v1.bind(this),liveChange:y1.bind(this)});this._sBoundProperty="value";return[Z1];}function i1(i,j){var Y1=Q1.call(this);var Z1=new i(j,{text:{path:"$field>/conditions",type:Y1},textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",wrapping:"{$field>/multipleLines}",width:"100%",tooltip:"{$field>/tooltip}"});this._sBoundProperty="text";return[Z1];}function j1(i,j){this._bHideOperator=true;var Y1=Q1.call(this);H.call(this);var Z1=new i(j,{value:{path:"$field>/conditions",type:Y1},displayFormat:this._sDisplayFormat,valueFormat:this._sValueFormat,placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:N},enabled:{path:"$field>/editMode",formatter:Q},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",width:"100%",tooltip:"{$field>/tooltip}",change:v1.bind(this)});if(Z1.setDisplayFormatType){Z1.setDisplayFormatType(this._sCalendarType);}this._sBoundProperty="value";return[Z1];}function k1(i,j){var Y1=this.getFieldInfo();var Z1=Q1.call(this);var $1=new i(j,{text:{path:"$field>/conditions",type:Z1},textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",tooltip:"{$field>/tooltip}",press:z1.bind(this)});if(Y1&&Y1.getMetadata().getName()==="sap.ui.mdc.field.FieldInfo"){Y1.getDirectLinkHrefAndTarget().then(function(_1){if(_1){$1.setHref(_1.href);$1.setTarget(_1.target);}});}this._sBoundProperty="text";return[$1];}function l1(i,j){if(!this.getFieldHelp()){r1.call(this,"bool");}return e1.call(this,i,j);}function m1(i,j){I.call(this);this._bIsMeasure=true;var Y1=Q1.call(this);var Z1=[];var $1=new i(j,{value:{path:"$field>/conditions",type:Y1},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:N},enabled:{path:"$field>/editMode",formatter:Q},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",showValueHelp:false,width:"70%",tooltip:"{$field>/tooltip}",change:v1.bind(this),liveChange:y1.bind(this)});Z1.push($1);Z1=o1.call(this,Z1,j,i);this._sBoundProperty="value";return Z1;}function n1(i,j){I.call(this);this._bIsMeasure=true;var Y1=sap.ui.require("sap/m/Token");var Z1=sap.ui.require("sap/m/Input");var $1=P1.call(this);var _1=[];var a2=new Y1(j+"-token",{text:{path:'$field>',type:$1}});var b2=new k({path:"values",test:function(d2){if(!Array.isArray(d2[0])||d2[0][0]){return true;}else{return false;}}});var c2=new i(j,{placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:N},enabled:{path:"$field>/editMode",formatter:Q},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",showValueHelp:false,width:"70%",tooltip:"{$field>/tooltip}",tokens:{path:"$field>/conditions",template:a2,filters:[b2]},dependents:[a2],change:v1.bind(this),liveChange:y1.bind(this),tokenUpdate:A1.bind(this)});_1.push(c2);_1=o1.call(this,_1,j,Z1);this._sBoundProperty="value";return _1;}function o1(i,j,Y1){var Z1=R1.call(this);if(this.getEditMode()===E.EditableDisplay){i[0].bindProperty("description",{path:"$field>/conditions",type:Z1});i[0].setWidth("100%");i[0].setFieldWidth("70%");}else{var $1=new Y1(j+"-unit",{value:{path:"$field>/conditions",type:Z1},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:P},enabled:{path:"$field>/editMode",formatter:Q},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",showValueHelp:"{$field>/_fieldHelpEnabled}",width:"30%",tooltip:"{$field>/tooltip}",change:v1.bind(this),liveChange:y1.bind(this),valueHelpRequest:E1.bind(this)});L1.call(this,$1);i.push($1);}return i;}function p1(i){if(i.onsapprevious){i._origOnsapprevious=i.onsapprevious;i.onsapprevious=function(j){var Y1=C1.call(this);if(j.keyCode!==K.ARROW_UP&&(!Y1||!Y1.isOpen())){var i=this._getContent()[0];i._origOnsapprevious(j);}}.bind(this);}if(i.onsapnext){i._origOnsapnext=i.onsapnext;i.onsapnext=function(j){var Y1=C1.call(this);if(j.keyCode!==K.ARROW_DOWN&&(!Y1||!Y1.isOpen())){var i=this._getContent()[0];i._origOnsapnext(j);}}.bind(this);}if(i.onsapup){i._origOnsapup=i.onsapup;i.onsapup=function(j){var Y1=C1.call(this);if(!Y1||!Y1.isOpen()){var i=this._getContent()[0];i._origOnsapup(j);}}.bind(this);}if(i.onsapdown){i._origOnsapdown=i.onsapdown;i.onsapdown=function(j){var Y1=C1.call(this);if(!Y1||!Y1.isOpen()){var i=this._getContent()[0];i._origOnsapdown(j);}}.bind(this);}if(i.onsapbackspace){i._origOnsapbackspace=i.onsapbackspace;i.onsapbackspace=function(j){var Y1=C1.call(this);if(!Y1||!Y1.isOpen()){var i=this._getContent()[0];i._origOnsapbackspace(j);}}.bind(this);}}function q1(i){if(i._origOnsapprevious){i.onsapprevious=i._origOnsapprevious;delete i._origOnsapprevious;}if(i._origOnsapnext){i.onsapnext=i._origOnsapnext;delete i._origOnsapnext;}if(i._origOnsapup){i.onsapup=i._origOnsapup;delete i._origOnsapup;}if(i._origOnsapdown){i.onsapdown=i._origOnsapdown;delete i._origOnsapdown;}if(i._origOnsapbackspace){i.onsapbackspace=i._origOnsapbackspace;delete i._origOnsapbackspace;}}function r1(i){this.setProperty("_fieldHelpEnabled",true,true);this._sDefaultFieldHelp=v[i].id;var j=v[i].control;if(!j){if(v[i].promise){v[i].promise.then(s1.bind(this));}var Y1=sap.ui.require(v[i].name);if(!Y1&&!v[i].promise){v[i].promise=new Promise(function(Z1){v[i].resolve=Z1;sap.ui.require([v[i].name],function($1){r1.call(this,i);}.bind(this));}.bind(this)).then(s1.bind(this));}if(Y1){j=new Y1(v[i].id);v[i].control=j;j.connect(this);if(v[i].resolve){v[i].resolve();delete v[i].resolve;}if(!v[i].promise){s1.call(this);}}}}function s1(){B1.call(this,"BoolDefaultHelp","insert");L1.call(this,this.getAggregation("_content",[])[0]);}function t1(i){this._bParseError=true;}function u1(Y1){this._bParseError=true;var Z1=Y1.getParameter("newValue");var $1=false;var i=0;for(i=0;i<this._aAsyncChanges.length;i++){var _1=this._aAsyncChanges[i];if(_1.waitForUpdate&&Array.isArray(_1.result)){for(var j=0;j<_1.result.length;j++){var a2=_1.result[j];if(f(a2.values[0],Z1)||(a2.operator==="BT"&&f(a2.values[1],Z1))){_1.reject(Y1.getParameter("exception"));$1=true;break;}}if($1){break;}}}if($1){this._aAsyncChanges.splice(i,1);}}function v1(i){var j={parameters:m({},i.getParameters()),source:i.getSource()};var Y1=this._aAsyncChanges.length;if(Y1>0&&!this._aAsyncChanges[Y1-1].changeFired){this._aAsyncChanges[Y1-1].changeFired=true;this._aAsyncChanges[Y1-1].changeEvent=j;_.call(this,undefined,undefined,undefined,this._aAsyncChanges[Y1-1].promise);return;}var Z1={changeEvent:j};w1.call(this,Z1);}function w1(i){var j=this.getConditions();var Y1;var Z1=true;var $1;var _1;var a2=i.changeEvent.source;var b2=false;if(i.changeEvent.parameters.hasOwnProperty("valid")){Z1=i.changeEvent.parameters["valid"];if(!Z1&&i.changeEvent.parameters.hasOwnProperty("value")){$1=i.changeEvent.parameters["value"];}}var c2=false;var d2=this._sBoundProperty&&a2.getBindingInfo(this._sBoundProperty);if(d2&&d2.binding&&d2.binding.sPath==="/conditions"&&Z1){_1=j[0];Y1=j[0]&&j[0].values[0];}else if(i.changeEvent.parameters.hasOwnProperty("value")){Y1=i.changeEvent.parameters["value"];if(Z1){c2=true;}}else if(i.changeEvent.parameters.hasOwnProperty("query")){Y1=i.changeEvent.parameters["query"];c2=true;}else{_1=j[0];Y1=j[0]&&j[0].values[0];}if(c2){W.call(this);var e2;var f2;_1=S.resolve().then(function(){if(this._oNavigateCondition){Z1=true;return this._oNavigateCondition;}else{e2=P1.call(this);var h2=e2.parseValue(Y1);var i2=this._aAsyncChanges.length;if(i2>0&&!this._aAsyncChanges[i2-1].changeFired){f2=this._aAsyncChanges[i2-1];f2.changeFired=true;f2.changeEvent=i.changeEvent;_.call(this,undefined,undefined,undefined,f2.promise);}return h2;}}.bind(this)).then(function(_1){x1.call(this,_1,j,e2,Z1,Y1,a2,f2||i);return _1;}.bind(this)).catch(function(h2){Z1=false;$1=Y1;U.call(this,h2.message);if(f2&&f2.reject){if(V1.call(this,f2)){f2.reject(h2);}}else if(b2){_.call(this,j,Z1,$1);}}.bind(this)).unwrap();if(_1 instanceof Promise){b2=true;}}else if(!i.changeEvent.parameters.hasOwnProperty("valid")&&this._bParseError){$1=i.changeEvent.parameters["value"];Z1=false;}var g2=C1.call(this);if(g2&&this._bConnected){if(sap.ui.getCore().getCurrentFocusedControlId()===a2.getId()){g2.close();}g2.setFilterValue("");if(!b2&&Z1){D1.call(this,j,g2);g2.onFieldChange();}if(this.iLiveChangeTimer){clearTimeout(this.iLiveChangeTimer);}}if(this._oNavigateCondition){this._oNavigateCondition=undefined;O1.call(this);}if(i.resolve){U1.call(this,i);}else if(!b2){_.call(this,j,Z1,$1);}}function x1(i,j,Y1,Z1,$1,_1,a2){if(Y1){Y1.validateValue(i);}var b2=this.getMaxConditions();if(Z1){if(i){if(this._bIsMeasure&&j.length===1&&j[0].values[0][0]===undefined){j=[];}if(b2!==1&&C.indexOfCondition(i,j)>=0){throw new Error(this._oResourceBundle.getText("field.CONDITION_ALREADY_EXIST",[$1]));}else{if(b2>0&&b2<=j.length){j.splice(0,j.length-b2+1);}j.push(i);}}else if(b2===1){j=[];}if(!f(j,this.getConditions())){this.setProperty("conditions",j,true);}if(b2!==1){_1.setValue("");}}if(a2.resolve){var c2=C1.call(this);if(c2&&this._bConnected){D1.call(this,j,c2);c2.onFieldChange();}a2.result=j;U1.call(this,a2);V1.call(this,a2);}}function y1(i){var j;var Y1;var Z1=false;var $1=i.getSource();this._oNavigateCondition=undefined;O1.call(this);if("value"in i.getParameters()){j=i.getParameter("value");}if("escPressed"in i.getParameters()){Z1=i.getParameter("escPressed");}if("previousValue"in i.getParameters()){Y1=i.getParameter("previousValue");}else{var _1=this.getConditions();Y1=_1[0]&&_1[0].values[0];}var a2=C1.call(this);if(a2&&a2.openByTyping()&&(!this._bIsMeasure||$1.getShowValueHelp())){var b2;if(j[0]==="="&&j[1]==="="){b2=j.slice(2);}else if(j[0]==="="){b2=j.slice(1);}else{b2=j;}var c2=this.getDisplay();if(c2!==p.Value){var d2=a.getEEQOperator();var e2=d2.splitText(b2,c2);b2="";if(e2[0]){b2=e2[0];if(e2[1]){b2=b2+" ";}}if(e2[1]){b2=b2+e2[1];}}if(this.iLiveChangeTimer){clearTimeout(this.iLiveChangeTimer);delete this.iLiveChangeTimer;}this.iLiveChangeTimer=setTimeout(function(){if(this._bConnected&&this._getContent()[0]&&(sap.ui.getCore().getCurrentFocusedControlId()===this._getContent()[0].getId()||(this._getContent()[1]&&sap.ui.getCore().getCurrentFocusedControlId()===this._getContent()[1].getId()))){a2.setFilterValue(b2);if(a2.getConditions().length>0){a2.setConditions([]);}a2.open(true);}}.bind(this),300);}this.fireLiveChange({value:j,escPressed:Z1,previousValue:Y1});}function z1(i){var j=this.getFieldInfo();if(j){j.getTriggerHref().then(function(Y1){if(!Y1){j.open(this._getContent()[0]);}}.bind(this));}this.firePress();}function A1(j){if(j.getParameter("type")==="removed"){var Y1=j.getParameter("removedTokens");var Z1=this.getConditions();var $1;var i;for(i=0;i<Y1.length;i++){var _1=Y1[i];var a2=_1.getBindingContext("$field").sPath;var b2=parseInt(a2.slice(a2.lastIndexOf("/")+1));Z1[b2].delete=true;}for(i=Z1.length-1;i>=0;i--){if(Z1[i].delete){if(this._bIsMeasure){$1=Z1[i].values[0][1];}Z1.splice(i,1);}}if(this._bIsMeasure&&$1&&Z1.length===0){Z1=[C.createItemCondition([undefined,$1],undefined)];}this.setProperty("conditions",Z1,true);_.call(this,Z1,true);}}function B1(i,j){var Y1=sap.ui.getCore().byId(i);if(j==="remove"){Y1.detachEvent("select",F1,this);Y1.detachEvent("navigate",G1,this);Y1.detachEvent("dataUpdate",H1,this);Y1.detachEvent("disconnect",I1,this);this.setProperty("_fieldHelpEnabled",false,true);}else if(j==="insert"){if(Y1){Y1.attachEvent("dataUpdate",H1,this);this.setProperty("_fieldHelpEnabled",true,true);}}J.call(this,this.getConditions());}function C1(){var i=this.getFieldHelp();var j;if(!i&&this._sDefaultFieldHelp){i=this._sDefaultFieldHelp;}if(i){j=sap.ui.getCore().byId(i);}return j;}function D1(j,Y1){if(!Y1){Y1=C1.call(this);}if(this._bIsMeasure){var Z1=[];for(var i=0;i<j.length;i++){var $1=j[i];if($1.values[0]&&$1.values[0][1]){var _1=C.createItemCondition($1.values[0][1],undefined,$1.inParameters,$1.outParameters);Z1.push(_1);}}Y1.setConditions(Z1);}else{Y1.setConditions(j);}}function E1(i){var j=C1.call(this);if(j){j.setFilterValue("");var Y1=this.getConditions();D1.call(this,Y1,j);j.toggleOpen(false);}}function F1(j){var Y1=this.getConditions();var Z1=j.getParameter("conditions");var $1=j.getParameter("add");var _1=j.oSource;var a2=this.getMaxConditions();var b2;var c2=this.getControlForSuggestion();var d2;var i=0;if(this._bIsMeasure){if(Z1.length>1){throw new Error("Only one item must be selected! "+this);}if(Z1[0].operator!=="EEQ"){throw new Error("Only EEQ allowed! "+this);}if(Y1.length>0){for(i=0;i<Y1.length;i++){Y1[i].values[0][1]=Z1[0].values[0];if(Y1[i].operator==="BT"){Y1[i].values[1][1]=Z1[0].values[0];}if(Z1[0].inParameters){Y1[i].inParameters=Z1[0].inParameters;}if(Z1[0].outParameters){Y1[i].outParameters=Z1[0].outParameters;}}}else{b2=m({},Z1[0]);b2.values[0]=[undefined,b2.values[0]];b2.values[1]=undefined;Y1.push(b2);if(this._oConditionType){d2=this._oConditionType.formatValue(b2);}else if(this._oConditionsType){d2=this._oConditionsType.formatValue(Y1);}}}else{if(!$1){Y1=[];}for(i=0;i<Z1.length;i++){b2=Z1[i];if(!X1.call(this,b2.operator)){continue;}if(!$1||C.indexOfCondition(b2,Y1)===-1){Y1.push(b2);}}}if(a2>0&&a2<Y1.length){Y1.splice(0,Y1.length-a2);}if(f(Y1,this.getConditions())){if(c2&&c2.setDOMValue&&this.getMaxConditionsForHelp()===1&&Y1.length>0){if(this._bIsMeasure&&this._oUnitConditionsType){d2=this._oUnitConditionsType.formatValue(Y1);}else if(this._oConditionType){d2=this._oConditionType.formatValue(Y1[0]);}else if(this._oConditionsType){d2=this._oConditionsType.formatValue(Y1);}c2.setDOMValue(d2);}}else{if(c2&&c2.setDOMValue){if(a2!==1){c2.setDOMValue("");}}this._oNavigateCondition=undefined;O1.call(this);this.setProperty("conditions",Y1,true);_1.onFieldChange();_.call(this,Y1,true);}}function G1(i){var j=i.getParameter("value");var Y1=i.getParameter("key");var Z1=i.getParameter("condition");var $1;var _1;var a2=this.getControlForSuggestion();if(Z1){this._oNavigateCondition=m({},Z1);Y1=Z1.values[0];j=Z1.values[1];}else{this._oNavigateCondition=C.createItemCondition(Y1,j);}if(this._bIsMeasure){var b2=this.getConditions();if(b2.length>0){this._oNavigateCondition.operator=b2[0].operator;this._oNavigateCondition.values[0]=[b2[0].values[0][0],this._oNavigateCondition.values[0]];if(b2[0].operator==="BT"){this._oNavigateCondition.values[1]=[b2[0].values[1][0],this._oNavigateCondition.values[0][1]];}else{this._oNavigateCondition.values[1]=undefined;}}else{this._oNavigateCondition.values=[[undefined,this._oNavigateCondition.values[0]],undefined];}}O1.call(this);if(this.getDisplay()!==p.Value){$1=Y1;}else if(j){$1=j;}else{$1=Y1;}if(a2&&a2.setDOMValue){if(!_1){if(this._bIsMeasure&&this._oUnitConditionsType&&this._oNavigateCondition){_1=this._oUnitConditionsType.formatValue([this._oNavigateCondition]);}else if(this._oConditionType&&this._oNavigateCondition){_1=this._oConditionType.formatValue(this._oNavigateCondition);}else if(this._oConditionsType&&this._oNavigateCondition){_1=this._oConditionsType.formatValue([this._oNavigateCondition]);}else{_1=j||Y1;}}a2.setDOMValue(_1);a2._doSelect();}this.fireLiveChange({value:$1});}function H1(i){var j=this.getEditMode()===E.Editable&&this._getContent().length>0&&sap.ui.getCore().getCurrentFocusedControlId()===this._getContent()[0].getId();if(!j&&this.getConditions().length>0&&(this.getMaxConditions()!==1||(this.getDisplay()!==p.Value&&!this._bParseError))){this._oManagedObjectModel.checkUpdate(true);}}function I1(i){var j=C1.call(this);j.detachEvent("select",F1,this);j.detachEvent("navigate",G1,this);j.detachEvent("disconnect",I1,this);this._bConnected=false;}function J1(){var i=C1.call(this);if(i&&!this._bConnected){i.connect(this);this._bConnected=true;i.attachEvent("select",F1,this);i.attachEvent("navigate",G1,this);i.attachEvent("disconnect",I1,this);var j=this.getConditions();D1.call(this,j,i);var Y1=this.getControlForSuggestion();K1.call(this,Y1);}}function K1(i){if(i&&!i.orgOnsapfocusleave&&i.onsapfocusleave){i.orgOnsapfocusleave=i.onsapfocusleave;i.onsapfocusleave=function(j){var Y1=C1.call(this.getParent());if(Y1){var Z1=sap.ui.getCore().byId(j.relatedControlId);if(Z1){if(h(Y1.getDomRef(),Z1.getFocusDomRef())){j.stopPropagation();return;}else{Y1.skipOpening();}}}this.orgOnsapfocusleave(j);};}}function L1(i){var j=C1.call(this);if(j&&i&&i.addEndIcon){var Y1=j.getIcon();var Z1=i.getAggregation("_endIcon",[])[0];if(Z1){Z1.setSrc(Y1);}else{i.addEndIcon({id:i.getId()+"-vhi",src:Y1,useIconTooltip:false,noTabStop:true,press:function($1){if(!this.getValueHelpOnly()){var _1;if(D.support.touch){_1=this.$('inner');_1.attr('readonly','readonly');this.focus();_1.removeAttr('readonly');}else{this.focus();}this.bValueHelpRequested=true;this.fireValueHelpRequest({fromSuggestions:false});}}.bind(i)});}}}function M1(i,j){if(j==="remove"){i.detachEvent("dataUpdate",N1,this);}else if(j==="insert"){i.attachEvent("dataUpdate",N1,this);N1.call(this);}}function N1(){var i=this.getFieldInfo();var j=this;i.isTriggerable().then(function(Y1){j._bTriggerable=Y1;if(j.getAggregation("_content")&&j.getEditMode()===E.Display){a1.call(j);}});}s.prototype._getFormatOptions=function(){if(!this._asyncParsingCall){this._asyncParsingCall=T1.bind(this);}return{valueType:y.call(this),originalDateType:this._oDateOriginalType||this._oUnitOriginalType,display:this._bIsMeasure?p.Value:this.getDisplay(),fieldHelpID:this._bIsMeasure?undefined:this.getFieldHelp()||this._sDefaultFieldHelp,operators:this._getOperators(),hideOperator:this._bHideOperator,maxConditions:this.getMaxConditions(),bindingContext:this.getBindingContext(),asyncParsing:this._asyncParsingCall,navigateCondition:this._oNavigateCondition,delegate:this._oDelegate};};function O1(){if(this._oConditionType||this._oConditionsType){var i=this._getFormatOptions();if(this._oConditionType){this._oConditionType.setFormatOptions(i);}if(this._oConditionsType){this._oConditionsType.setFormatOptions(i);}if(this._oUnitConditionsType){i=S1.call(this);this._oUnitConditionsType.setFormatOptions(i);}}}function P1(){if(!this._oConditionType){this._oConditionType=new b();this._oConditionType._bCreatedByField=true;O1.call(this);}return this._oConditionType;}function Q1(){if(!this._oConditionsType){this._oConditionsType=new c();this._oConditionsType._bCreatedByField=true;O1.call(this);}return this._oConditionsType;}s.prototype._checkValueInitial=function(i){if(i===null||i===undefined){return true;}if(i===""){var j=y.call(this);var Y1=j.parseValue(i,"string");if(Y1===i){return true;}else{try{j.validateValue(Y1);}catch(Z1){return true;}}}else{var $1=z.call(this);if(this._oDelegate.getBaseType($1)==="unit"&&Array.isArray(i)&&i.length>1&&(i[0]===undefined||i[0]===null)&&!i[1]){return true;}}return false;};function R1(){if(!this._oUnitConditionsType){var i=S1.call(this);this._oUnitConditionsType=new c(i);this._oUnitConditionsType._bCreatedByField=true;}return this._oUnitConditionsType;}function S1(){if(!this._asyncParsingCall){this._asyncParsingCall=T1.bind(this);}return{valueType:undefined,originalDateType:y.call(this),display:this.getDisplay(),fieldHelpID:this.getFieldHelp()||this._sDefaultFieldHelp,operators:["EEQ"],hideOperator:true,maxConditions:1,bindingContext:this.getBindingContext(),asyncParsing:this._asyncParsingCall,navigateCondition:this._oNavigateCondition,delegate:this._oDelegate,isUnit:true,getConditions:this.getConditions.bind(this)};}function T1(i){var j=C1.call(this);if(j&&j.isOpen()){var Y1=document.activeElement;if(Y1&&(h(this.getDomRef(),Y1)||h(j.getDomRef(),Y1))){j.close();}}var Z1={};var $1=new Promise(function(_1,a2){Z1.resolve=_1;Z1.reject=a2;i.then(function(b2){Z1.result=b2;var c2=this.getConditions();if(f(b2,c2)){U1.call(this,Z1);V1.call(this,Z1);}else{Z1.waitForUpdate=true;}}.bind(this)).catch(function(b2){this._bParseError=true;a2(b2);V1.call(this,Z1);}.bind(this));}.bind(this));Z1.promise=$1;this._aAsyncChanges.push(Z1);}s.prototype._getResultForPromise=function(i){return i;};function U1(i){i.resolve(this._getResultForPromise(i.result));}function V1(j){var Y1=false;var i=0;for(i=0;i<this._aAsyncChanges.length;i++){if(j===this._aAsyncChanges[i]){Y1=true;break;}}if(Y1){this._aAsyncChanges.splice(i,1);}return Y1;}function W1(i){if(this._oDelegate||this._oDelegateLoading){throw new Error("MetadataDelegate can only be set once");}this._oDelegate=sap.ui.require(i);if(this._oDelegate){this._oDelegateResolve();delete this._oDelegateResolve;delete this._oDelegateReject;}else{this._oDelegateLoading=true;sap.ui.require([i],function(j){this._oDelegate=j;this._oDelegateResolve();delete this._oDelegateResolve;delete this._oDelegateReject;delete this._oDelegateLoading;}.bind(this),function(){this._oDelegateReject("Failed to load delegate");delete this._oDelegateResolve;delete this._oDelegateReject;delete this._oDelegateLoading;}.bind(this));}}s.prototype._getOperators=function(){var i=z.call(this);var j=A.call(this);var Y1=B.call(this);var Z1=this._oDelegate.getBaseType(i,Y1,j);if(Z1==="unit"){Z1="numeric";}return a.getOperatorsForType(Z1);};function X1(j){var Y1=this._getOperators();for(var i=0;i<Y1.length;i++){if(j===Y1[i]){return true;}if(j==="EQ"&&Y1[i]==="EEQ"){return true;}if(j==="EEQ"&&Y1[i]==="EQ"){return true;}}return false;}return s;},true);
